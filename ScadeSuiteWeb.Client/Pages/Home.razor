@page "/"
@using ScadeSuiteWeb.Client.Services
@using Microsoft.AspNetCore.Components.Authorization
@inject IToastService ToastService
@inject IAuthService AuthService
@inject AuthenticationStateProvider auth
@inject NavigationManager Nm
<PageTitle>Home</PageTitle>
<pre>
-----------------------------
@Name 
-----------------------------
</pre>

@code {

	public string Name { get; set; }
    protected override async Task<Task> OnInitializedAsync()
    
    {
		// var userAuthenticationState = await auth.GetAuthenticationStateAsync();
		// if (userAuthenticationState.User.Identity is null || !userAuthenticationState.User.Identity.IsAuthenticated)
		// {
		// 	Nm.NavigateTo("/login");
		// }
		// else
		// {
		// 	var ca = userAuthenticationState.User.Claims;
		// 	AuthService.LoadToken(ca);
		// 	Name = AuthService.GetNickName();
		// 	Console.WriteLine(Name);
		// }

        
        return base.OnInitializedAsync();
    }

}
